{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/ThemeToggle.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"toggle\": \"ThemeToggle-module__3b5zuq__toggle\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA"}},
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/abhig/Downloads/zip-explorer1/components/ThemeToggle.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport styles from \"./ThemeToggle.module.css\"\n\nexport function ThemeToggle() {\n  const [isDark, setIsDark] = useState(false)\n  const [mounted, setMounted] = useState(false)\n\n  useEffect(() => {\n    setMounted(true)\n    const isDarkMode = document.documentElement.classList.contains(\"dark\")\n    setIsDark(isDarkMode)\n  }, [])\n\n  const toggleTheme = () => {\n    if (!mounted) return\n\n    const html = document.documentElement\n    const newIsDark = !isDark\n\n    if (newIsDark) {\n      html.classList.add(\"dark\")\n      localStorage.setItem(\"theme\", \"dark\")\n    } else {\n      html.classList.remove(\"dark\")\n      localStorage.setItem(\"theme\", \"light\")\n    }\n\n    setIsDark(newIsDark)\n  }\n\n  if (!mounted) return null\n\n  return (\n    <button\n      className={styles.toggle}\n      onClick={toggleTheme}\n      title={isDark ? \"Switch to light mode\" : \"Switch to dark mode\"}\n      aria-label=\"Toggle theme\"\n    >\n      {isDark ? (\n        <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n          <circle cx=\"12\" cy=\"12\" r=\"5\" />\n          <line x1=\"12\" y1=\"1\" x2=\"12\" y2=\"3\" />\n          <line x1=\"12\" y1=\"21\" x2=\"12\" y2=\"23\" />\n          <line x1=\"4.22\" y1=\"4.22\" x2=\"5.64\" y2=\"5.64\" />\n          <line x1=\"18.36\" y1=\"18.36\" x2=\"19.78\" y2=\"19.78\" />\n          <line x1=\"1\" y1=\"12\" x2=\"3\" y2=\"12\" />\n          <line x1=\"21\" y1=\"12\" x2=\"23\" y2=\"12\" />\n          <line x1=\"4.22\" y1=\"19.78\" x2=\"5.64\" y2=\"18.36\" />\n          <line x1=\"18.36\" y1=\"5.64\" x2=\"19.78\" y2=\"4.22\" />\n        </svg>\n      ) : (\n        <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n          <path d=\"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z\" />\n        </svg>\n      )}\n    </button>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKO,SAAS;;IACd,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;iCAAC;YACR,WAAW;YACX,MAAM,aAAa,SAAS,eAAe,CAAC,SAAS,CAAC,QAAQ,CAAC;YAC/D,UAAU;QACZ;gCAAG,EAAE;IAEL,MAAM,cAAc;QAClB,IAAI,CAAC,SAAS;QAEd,MAAM,OAAO,SAAS,eAAe;QACrC,MAAM,YAAY,CAAC;QAEnB,IAAI,WAAW;YACb,KAAK,SAAS,CAAC,GAAG,CAAC;YACnB,aAAa,OAAO,CAAC,SAAS;QAChC,OAAO;YACL,KAAK,SAAS,CAAC,MAAM,CAAC;YACtB,aAAa,OAAO,CAAC,SAAS;QAChC;QAEA,UAAU;IACZ;IAEA,IAAI,CAAC,SAAS,OAAO;IAErB,qBACE,6LAAC;QACC,WAAW,mJAAM,CAAC,MAAM;QACxB,SAAS;QACT,OAAO,SAAS,yBAAyB;QACzC,cAAW;kBAEV,uBACC,6LAAC;YAAI,OAAM;YAAK,QAAO;YAAK,SAAQ;YAAY,MAAK;YAAO,QAAO;YAAe,aAAY;;8BAC5F,6LAAC;oBAAO,IAAG;oBAAK,IAAG;oBAAK,GAAE;;;;;;8BAC1B,6LAAC;oBAAK,IAAG;oBAAK,IAAG;oBAAI,IAAG;oBAAK,IAAG;;;;;;8BAChC,6LAAC;oBAAK,IAAG;oBAAK,IAAG;oBAAK,IAAG;oBAAK,IAAG;;;;;;8BACjC,6LAAC;oBAAK,IAAG;oBAAO,IAAG;oBAAO,IAAG;oBAAO,IAAG;;;;;;8BACvC,6LAAC;oBAAK,IAAG;oBAAQ,IAAG;oBAAQ,IAAG;oBAAQ,IAAG;;;;;;8BAC1C,6LAAC;oBAAK,IAAG;oBAAI,IAAG;oBAAK,IAAG;oBAAI,IAAG;;;;;;8BAC/B,6LAAC;oBAAK,IAAG;oBAAK,IAAG;oBAAK,IAAG;oBAAK,IAAG;;;;;;8BACjC,6LAAC;oBAAK,IAAG;oBAAO,IAAG;oBAAQ,IAAG;oBAAO,IAAG;;;;;;8BACxC,6LAAC;oBAAK,IAAG;oBAAQ,IAAG;oBAAO,IAAG;oBAAQ,IAAG;;;;;;;;;;;iCAG3C,6LAAC;YAAI,OAAM;YAAK,QAAO;YAAK,SAAQ;YAAY,MAAK;YAAO,QAAO;YAAe,aAAY;sBAC5F,cAAA,6LAAC;gBAAK,GAAE;;;;;;;;;;;;;;;;AAKlB;GAvDgB;KAAA"}},
    {"offset": {"line": 189, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/UploadArea.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"button\": \"UploadArea-module__IZzUWW__button\",\n  \"container\": \"UploadArea-module__IZzUWW__container\",\n  \"loading\": \"UploadArea-module__IZzUWW__loading\",\n  \"spin\": \"UploadArea-module__IZzUWW__spin\",\n  \"spinner\": \"UploadArea-module__IZzUWW__spinner\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 200, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/abhig/Downloads/zip-explorer1/components/UploadArea.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport { useRef } from \"react\"\nimport styles from \"./UploadArea.module.css\"\n\ninterface UploadAreaProps {\n  onUpload: (file: File) => void\n  isLoading: boolean\n}\n\nexport function UploadArea({ onUpload, isLoading }: UploadAreaProps) {\n  const fileInputRef = useRef<HTMLInputElement>(null)\n\n  const handleFileSelect = (files: FileList | null) => {\n    if (!files || files.length === 0) return\n    const file = files[0]\n\n    if (!file.name.endsWith(\".zip\")) {\n      alert(\"Please select a .zip file\")\n      return\n    }\n\n    onUpload(file)\n  }\n\n  const handleClick = () => {\n    fileInputRef.current?.click()\n  }\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    handleFileSelect(e.target.files)\n  }\n\n  const handleDragOver = (e: React.DragEvent<HTMLDivElement>) => {\n    e.preventDefault()\n    e.stopPropagation()\n  }\n\n  const handleDragLeave = (e: React.DragEvent<HTMLDivElement>) => {\n    e.preventDefault()\n    e.stopPropagation()\n  }\n\n  const handleDrop = (e: React.DragEvent<HTMLDivElement>) => {\n    e.preventDefault()\n    e.stopPropagation()\n    handleFileSelect(e.dataTransfer.files)\n  }\n\n  return (\n    <div\n      className={`${styles.container} ${isLoading ? styles.loading : \"\"}`}\n      onDragOver={handleDragOver}\n      onDragLeave={handleDragLeave}\n      onDrop={handleDrop}\n    >\n      <button\n        className={styles.button}\n        onClick={handleClick}\n        disabled={isLoading}\n        title=\"Click to upload or drag and drop a .zip file\"\n      >\n        {isLoading ? (\n          <>\n            <span className={styles.spinner} />\n            Uploading...\n          </>\n        ) : (\n          <>\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\" />\n              <polyline points=\"17 8 12 3 7 8\" />\n              <line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\" />\n            </svg>\n            <span>Upload ZIP File</span>\n          </>\n        )}\n      </button>\n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        accept=\".zip\"\n        onChange={handleInputChange}\n        style={{ display: \"none\" }}\n        disabled={isLoading}\n      />\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAIA;AACA;;;AALA;;;AAYO,SAAS,WAAW,EAAE,QAAQ,EAAE,SAAS,EAAmB;;IACjE,MAAM,eAAe,IAAA,uKAAM,EAAmB;IAE9C,MAAM,mBAAmB,CAAC;QACxB,IAAI,CAAC,SAAS,MAAM,MAAM,KAAK,GAAG;QAClC,MAAM,OAAO,KAAK,CAAC,EAAE;QAErB,IAAI,CAAC,KAAK,IAAI,CAAC,QAAQ,CAAC,SAAS;YAC/B,MAAM;YACN;QACF;QAEA,SAAS;IACX;IAEA,MAAM,cAAc;QAClB,aAAa,OAAO,EAAE;IACxB;IAEA,MAAM,oBAAoB,CAAC;QACzB,iBAAiB,EAAE,MAAM,CAAC,KAAK;IACjC;IAEA,MAAM,iBAAiB,CAAC;QACtB,EAAE,cAAc;QAChB,EAAE,eAAe;IACnB;IAEA,MAAM,kBAAkB,CAAC;QACvB,EAAE,cAAc;QAChB,EAAE,eAAe;IACnB;IAEA,MAAM,aAAa,CAAC;QAClB,EAAE,cAAc;QAChB,EAAE,eAAe;QACjB,iBAAiB,EAAE,YAAY,CAAC,KAAK;IACvC;IAEA,qBACE,6LAAC;QACC,WAAW,GAAG,kJAAM,CAAC,SAAS,CAAC,CAAC,EAAE,YAAY,kJAAM,CAAC,OAAO,GAAG,IAAI;QACnE,YAAY;QACZ,aAAa;QACb,QAAQ;;0BAER,6LAAC;gBACC,WAAW,kJAAM,CAAC,MAAM;gBACxB,SAAS;gBACT,UAAU;gBACV,OAAM;0BAEL,0BACC;;sCACE,6LAAC;4BAAK,WAAW,kJAAM,CAAC,OAAO;;;;;;wBAAI;;iDAIrC;;sCACE,6LAAC;4BAAI,OAAM;4BAAK,QAAO;4BAAK,SAAQ;4BAAY,MAAK;4BAAO,QAAO;4BAAe,aAAY;;8CAC5F,6LAAC;oCAAK,GAAE;;;;;;8CACR,6LAAC;oCAAS,QAAO;;;;;;8CACjB,6LAAC;oCAAK,IAAG;oCAAK,IAAG;oCAAI,IAAG;oCAAK,IAAG;;;;;;;;;;;;sCAElC,6LAAC;sCAAK;;;;;;;;;;;;;0BAIZ,6LAAC;gBACC,KAAK;gBACL,MAAK;gBACL,QAAO;gBACP,UAAU;gBACV,OAAO;oBAAE,SAAS;gBAAO;gBACzB,UAAU;;;;;;;;;;;;AAIlB;GA9EgB;KAAA"}},
    {"offset": {"line": 350, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/UserMenu.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"dropdown\": \"UserMenu-module__pCivJG__dropdown\",\n  \"loginBtn\": \"UserMenu-module__pCivJG__loginBtn\",\n  \"menuItem\": \"UserMenu-module__pCivJG__menuItem\",\n  \"userBtn\": \"UserMenu-module__pCivJG__userBtn\",\n  \"userMenu\": \"UserMenu-module__pCivJG__userMenu\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 361, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/abhig/Downloads/zip-explorer1/components/UserMenu.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { signOut, useSession } from \"next-auth/react\"\r\nimport Link from \"next/link\"\r\nimport { useState } from \"react\"\r\nimport styles from \"./UserMenu.module.css\"\r\n\r\nexport function UserMenu() {\r\n  const { data: session, status } = useSession()\r\n  const [showMenu, setShowMenu] = useState(false)\r\n\r\n  // Determine userTier locally based on the session status\r\n  const userTier: \"anonymous\" | \"free\" | \"monthly\" | \"yearly\" = \r\n    status === \"authenticated\" ? \"free\" : \"anonymous\" // Simplified logic: if logged in, assume 'free' tier\r\n\r\n  // Display nothing while loading the session\r\n  if (status === \"loading\") {\r\n    return null\r\n  }\r\n\r\n  // Display Sign In link if not authenticated\r\n  if (!session) {\r\n    return (\r\n      <Link href=\"/login\" className={styles.loginBtn}>\r\n        Sign In\r\n      </Link>\r\n    )\r\n  }\r\n\r\n  // Display User Menu if authenticated\r\n  return (\r\n    <div className={styles.userMenu}>\r\n      <button className={styles.userBtn} onClick={() => setShowMenu(!showMenu)}>\r\n        üë§ {session.user?.name || \"User\"} {/* Added fallback 'User' name */}\r\n      </button>\r\n\r\n      {showMenu && (\r\n        <div className={styles.dropdown}>\r\n          <Link href=\"/dashboard\" className={styles.menuItem}>\r\n            Dashboard\r\n          </Link>\r\n          <Link href=\"/billing\" className={styles.menuItem}>\r\n            Billing ({userTier})\r\n          </Link>\r\n          <button className={styles.menuItem} onClick={() => signOut()}>\r\n            Sign Out\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAOO,SAAS;;IACd,MAAM,EAAE,MAAM,OAAO,EAAE,MAAM,EAAE,GAAG,IAAA,+JAAU;IAC5C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IAEzC,yDAAyD;IACzD,MAAM,WACJ,WAAW,kBAAkB,SAAS,YAAY,qDAAqD;;IAEzG,4CAA4C;IAC5C,IAAI,WAAW,WAAW;QACxB,OAAO;IACT;IAEA,4CAA4C;IAC5C,IAAI,CAAC,SAAS;QACZ,qBACE,6LAAC,0KAAI;YAAC,MAAK;YAAS,WAAW,gJAAM,CAAC,QAAQ;sBAAE;;;;;;IAIpD;IAEA,qCAAqC;IACrC,qBACE,6LAAC;QAAI,WAAW,gJAAM,CAAC,QAAQ;;0BAC7B,6LAAC;gBAAO,WAAW,gJAAM,CAAC,OAAO;gBAAE,SAAS,IAAM,YAAY,CAAC;;oBAAW;oBACpE,QAAQ,IAAI,EAAE,QAAQ;oBAAO;;;;;;;YAGlC,0BACC,6LAAC;gBAAI,WAAW,gJAAM,CAAC,QAAQ;;kCAC7B,6LAAC,0KAAI;wBAAC,MAAK;wBAAa,WAAW,gJAAM,CAAC,QAAQ;kCAAE;;;;;;kCAGpD,6LAAC,0KAAI;wBAAC,MAAK;wBAAW,WAAW,gJAAM,CAAC,QAAQ;;4BAAE;4BACtC;4BAAS;;;;;;;kCAErB,6LAAC;wBAAO,WAAW,gJAAM,CAAC,QAAQ;wBAAE,SAAS,IAAM,IAAA,4JAAO;kCAAI;;;;;;;;;;;;;;;;;;AAOxE;GA5CgB;;QACoB,+JAAU;;;KAD9B"}},
    {"offset": {"line": 478, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/DownloadMenu.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"downloadBtn\": \"DownloadMenu-module__obcEYa__downloadBtn\",\n  \"downloadContainer\": \"DownloadMenu-module__obcEYa__downloadContainer\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA"}},
    {"offset": {"line": 486, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/abhig/Downloads/zip-explorer1/components/DownloadMenu.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState } from \"react\"\r\nimport { toast } from \"sonner\"\r\nimport styles from \"./DownloadMenu.module.css\"\r\n\r\ninterface DownloadMenuProps {\r\n  selectedFilePaths: string[]\r\n  sessionId: string\r\n  // Ensure the userTier type is correctly mapped to the backend logic\r\n  userTier: \"anonymous\" | \"free\" | \"monthly\" | \"yearly\" | string \r\n}\r\n\r\nexport function DownloadMenu({ selectedFilePaths, sessionId, userTier }: DownloadMenuProps) {\r\n  const [isDownloading, setIsDownloading] = useState(false)\r\n  \r\n  // Use a type guard or fallback for the userTier mapping\r\n  const effectiveTier = [\"anonymous\", \"free\", \"monthly\", \"yearly\"].includes(userTier) ? userTier : \"free\"\r\n\r\n  const canDownload = {\r\n    anonymous: false,\r\n    free: selectedFilePaths.length <= 10,\r\n    monthly: true,\r\n    yearly: true,\r\n  }[effectiveTier as \"anonymous\" | \"free\" | \"monthly\" | \"yearly\"] // Cast for type safety\r\n\r\n  const handleDownload = async (downloadType: \"individual\" | \"zip\") => {\r\n    \r\n    // --- Initial validation ---\r\n    if (selectedFilePaths.length === 0 || selectedFilePaths.some(p => !p)) {\r\n      toast.error(\"Please select valid files to download.\")\r\n      console.error(\"Download blocked: selectedFilePaths contains 0 or invalid paths:\", selectedFilePaths);\r\n      return\r\n    }\r\n\r\n    if (!canDownload) {\r\n      toast.error(\"Your plan doesn't allow this download. Please upgrade.\")\r\n      return\r\n    }\r\n\r\n    setIsDownloading(true)\r\n    try {\r\n      const response = await fetch(\"/api/files/download\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          sessionId,\r\n          files: selectedFilePaths,\r\n          downloadType,\r\n          userTier: effectiveTier, // Send the validated tier to the backend\r\n        }),\r\n      })\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        toast.error(error.error || \"Download failed\")\r\n        return\r\n      }\r\n\r\n      // --- Download initiation logic ---\r\n      const blob = await response.blob()\r\n      \r\n      // Determine the filename based on type and number of files\r\n      let filename = 'download';\r\n      if (downloadType === \"zip\" || selectedFilePaths.length > 1) {\r\n        filename = \"files.zip\"\r\n      } else if (selectedFilePaths.length === 1) {\r\n        // Extract filename from the path\r\n        filename = selectedFilePaths[0].split(\"/\").pop() || \"file\"\r\n      }\r\n\r\n      const url = window.URL.createObjectURL(blob)\r\n      const a = document.createElement(\"a\")\r\n      a.href = url\r\n      a.download = filename\r\n      a.click()\r\n      window.URL.revokeObjectURL(url)\r\n      \r\n      toast.success(`Download of ${filename} started!`)\r\n    } catch (error) {\r\n      console.error(\"Frontend Download failed:\", error)\r\n      toast.error(\"Download failed due to client error.\")\r\n    } finally {\r\n      setIsDownloading(false)\r\n    }\r\n  }\r\n\r\n  // Determine if we should show the ZIP button\r\n  const showZipButton = selectedFilePaths.length > 1;\r\n\r\n  return (\r\n    <div className={styles.downloadContainer}>\r\n      {!showZipButton ? (\r\n        // Single file button\r\n        <button\r\n          className={styles.downloadBtn}\r\n          onClick={() => handleDownload(\"individual\")}\r\n          disabled={isDownloading || !canDownload || selectedFilePaths.length === 0}\r\n          title={canDownload ? `Download: ${selectedFilePaths[0]?.split(\"/\").pop() || 'file'}` : \"Upgrade plan to download\"}\r\n        >\r\n          {isDownloading ? \"‚¨áÔ∏è Downloading...\" : \"‚¨áÔ∏è Download File\"}\r\n        </button>\r\n      ) : (\r\n        // Multiple files button\r\n        <button\r\n          className={styles.downloadBtn}\r\n          onClick={() => handleDownload(\"zip\")}\r\n          disabled={isDownloading || !canDownload || selectedFilePaths.length === 0}\r\n          title={canDownload ? `Download ${selectedFilePaths.length} files as ZIP` : \"Upgrade plan to download ZIP\"}\r\n        >\r\n          {isDownloading ? \"‚¨áÔ∏è Downloading...\" : \"‚¨áÔ∏è Download ZIP\"}\r\n        </button>\r\n      )}\r\n      \r\n      {/* Optional: Add a subtle notice if limits are hit */}\r\n      {effectiveTier === 'free' && selectedFilePaths.length > 10 && (\r\n          <p className={styles.limitNotice}>\r\n            Free plan limited to 10 files per ZIP. Please deselect files or upgrade.\r\n          </p>\r\n      )}\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 624, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/SaveHistoryButton.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"btn\": \"SaveHistoryButton-module__7aqaaq__btn\",\n  \"modal\": \"SaveHistoryButton-module__7aqaaq__modal\",\n  \"modalBody\": \"SaveHistoryButton-module__7aqaaq__modalBody\",\n  \"modalContent\": \"SaveHistoryButton-module__7aqaaq__modalContent\",\n  \"modalHeader\": \"SaveHistoryButton-module__7aqaaq__modalHeader\",\n  \"useBtn\": \"SaveHistoryButton-module__7aqaaq__useBtn\",\n  \"zipInfo\": \"SaveHistoryButton-module__7aqaaq__zipInfo\",\n  \"zipItem\": \"SaveHistoryButton-module__7aqaaq__zipItem\",\n  \"zipList\": \"SaveHistoryButton-module__7aqaaq__zipList\",\n  \"zipMeta\": \"SaveHistoryButton-module__7aqaaq__zipMeta\",\n  \"zipName\": \"SaveHistoryButton-module__7aqaaq__zipName\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 641, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/abhig/Downloads/zip-explorer1/components/SaveHistoryButton.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState } from \"react\"\r\nimport { toast } from \"sonner\"\r\nimport styles from \"./SaveHistoryButton.module.css\"\r\n\r\ninterface SaveHistoryButtonProps {\r\n  sessionId: string\r\n}\r\n\r\ninterface SavedZip {\r\n  _id: string\r\n  name: string\r\n  fileCount: number\r\n  createdAt: string\r\n}\r\n\r\nexport function SaveHistoryButton({ sessionId }: SaveHistoryButtonProps) {\r\n  const [showModal, setShowModal] = useState(false)\r\n  const [savedZips, setSavedZips] = useState<SavedZip[]>([])\r\n  const [isLoading, setIsLoading] = useState(false)\r\n\r\n  const fetchSavedZips = async () => {\r\n    setIsLoading(true)\r\n    try {\r\n      const response = await fetch(\"/api/save-zip/list\")\r\n      const data = await response.json()\r\n      if (data.success) {\r\n        setSavedZips(data.savedZips)\r\n      }\r\n    } catch (error) {\r\n      toast.error(\"Failed to load saved ZIPs\")\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <button\r\n        className={styles.btn}\r\n        onClick={() => {\r\n          setShowModal(true)\r\n          fetchSavedZips()\r\n        }}\r\n        title=\"View saved ZIP folders\"\r\n      >\r\n        üíæ History\r\n      </button>\r\n\r\n      {showModal && (\r\n        <div className={styles.modal}>\r\n          <div className={styles.modalContent}>\r\n            <div className={styles.modalHeader}>\r\n              <h2>Saved ZIP Folders</h2>\r\n              <button onClick={() => setShowModal(false)}>√ó</button>\r\n            </div>\r\n            <div className={styles.modalBody}>\r\n              {isLoading ? (\r\n                <p>Loading...</p>\r\n              ) : savedZips.length === 0 ? (\r\n                <p>No saved ZIPs yet</p>\r\n              ) : (\r\n                <ul className={styles.zipList}>\r\n                  {savedZips.map((zip) => (\r\n                    <li key={zip._id} className={styles.zipItem}>\r\n                      <div className={styles.zipInfo}>\r\n                        <span className={styles.zipName}>{zip.name}</span>\r\n                        <span className={styles.zipMeta}>{zip.fileCount} files</span>\r\n                      </div>\r\n                      <button className={styles.useBtn}>Use</button>\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAiBO,SAAS,kBAAkB,EAAE,SAAS,EAA0B;;IACrE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAa,EAAE;IACzD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAE3C,MAAM,iBAAiB;QACrB,aAAa;QACb,IAAI;YACF,MAAM,WAAW,MAAM,MAAM;YAC7B,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,IAAI,KAAK,OAAO,EAAE;gBAChB,aAAa,KAAK,SAAS;YAC7B;QACF,EAAE,OAAO,OAAO;YACd,oJAAK,CAAC,KAAK,CAAC;QACd,SAAU;YACR,aAAa;QACf;IACF;IAEA,qBACE;;0BACE,6LAAC;gBACC,WAAW,yJAAM,CAAC,GAAG;gBACrB,SAAS;oBACP,aAAa;oBACb;gBACF;gBACA,OAAM;0BACP;;;;;;YAIA,2BACC,6LAAC;gBAAI,WAAW,yJAAM,CAAC,KAAK;0BAC1B,cAAA,6LAAC;oBAAI,WAAW,yJAAM,CAAC,YAAY;;sCACjC,6LAAC;4BAAI,WAAW,yJAAM,CAAC,WAAW;;8CAChC,6LAAC;8CAAG;;;;;;8CACJ,6LAAC;oCAAO,SAAS,IAAM,aAAa;8CAAQ;;;;;;;;;;;;sCAE9C,6LAAC;4BAAI,WAAW,yJAAM,CAAC,SAAS;sCAC7B,0BACC,6LAAC;0CAAE;;;;;uCACD,UAAU,MAAM,KAAK,kBACvB,6LAAC;0CAAE;;;;;qDAEH,6LAAC;gCAAG,WAAW,yJAAM,CAAC,OAAO;0CAC1B,UAAU,GAAG,CAAC,CAAC,oBACd,6LAAC;wCAAiB,WAAW,yJAAM,CAAC,OAAO;;0DACzC,6LAAC;gDAAI,WAAW,yJAAM,CAAC,OAAO;;kEAC5B,6LAAC;wDAAK,WAAW,yJAAM,CAAC,OAAO;kEAAG,IAAI,IAAI;;;;;;kEAC1C,6LAAC;wDAAK,WAAW,yJAAM,CAAC,OAAO;;4DAAG,IAAI,SAAS;4DAAC;;;;;;;;;;;;;0DAElD,6LAAC;gDAAO,WAAW,yJAAM,CAAC,MAAM;0DAAE;;;;;;;uCAL3B,IAAI,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgBpC;GAhEgB;KAAA"}},
    {"offset": {"line": 813, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/TopBar.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"accessBtn\": \"TopBar-module__dQ673a__accessBtn\",\n  \"label\": \"TopBar-module__dQ673a__label\",\n  \"left\": \"TopBar-module__dQ673a__left\",\n  \"logo\": \"TopBar-module__dQ673a__logo\",\n  \"middle\": \"TopBar-module__dQ673a__middle\",\n  \"right\": \"TopBar-module__dQ673a__right\",\n  \"shareBtn\": \"TopBar-module__dQ673a__shareBtn\",\n  \"stats\": \"TopBar-module__dQ673a__stats\",\n  \"title\": \"TopBar-module__dQ673a__title\",\n  \"topbar\": \"TopBar-module__dQ673a__topbar\",\n  \"value\": \"TopBar-module__dQ673a__value\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 830, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/abhig/Downloads/zip-explorer1/components/TopBar.tsx"],"sourcesContent":["\"use client\"\n\nimport { ThemeToggle } from \"./ThemeToggle\"\nimport { UploadArea } from \"./UploadArea\"\nimport { UserMenu } from \"./UserMenu\"\nimport { DownloadMenu } from \"./DownloadMenu\"\nimport { SaveHistoryButton } from \"./SaveHistoryButton\"\nimport styles from \"./TopBar.module.css\"\nimport { useSession } from \"next-auth/react\" // Keep useSession here\n\ninterface TopBarProps {\n  fileCount: number\n  onUpload: (file: File) => void\n  isLoading: boolean\n  selectedFilePaths: string[]\n  sessionId: string\n  onShareClick: () => void\n  onAccessSharedClick: () => void\n}\n\nexport function TopBar({\n  fileCount,\n  onUpload,\n  isLoading,\n  selectedFilePaths,\n  sessionId,\n  onShareClick,\n  onAccessSharedClick,\n}: TopBarProps) {\n  const { data: session } = useSession() // Using session here\n  \n  // Determine userTier locally for DownloadMenu and SaveHistoryButton\n  const userTier: \"anonymous\" | \"free\" | \"monthly\" | \"yearly\" = session ? \"free\" : \"anonymous\"\n\n\n  return (\n    <header className={styles.topbar}>\n      <div className={styles.left}>\n        <div className={styles.logo}>\n          <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n            <path d=\"M12 2l.5 1h6.5a1 1 0 0 1 1 1v3H4V4a1 1 0 0 1 1-1h6.5l.5-1\" />\n            <rect x=\"4\" y=\"5\" width=\"16\" height=\"14\" rx=\"1\" />\n            <path d=\"M8 9h8M8 13h8M8 17h4\" strokeOpacity=\"0.5\" />\n          </svg>\n          <h1 className={styles.title}>Code Explorer</h1>\n        </div>\n      </div>\n      <div className={styles.middle}>\n        <UploadArea onUpload={onUpload} isLoading={isLoading} />\n      </div>\n      <div className={styles.right}>\n        <div className={styles.stats}>\n          <span className={styles.label}>Files:</span>\n          <span className={styles.value}>{fileCount}</span>\n        </div>\n        {selectedFilePaths.length > 0 && (\n          <>\n            {/* The userTier for DownloadMenu should probably be dynamic based on session */}\n            <DownloadMenu selectedFilePaths={selectedFilePaths} sessionId={sessionId} userTier={userTier} /> \n            <button className={styles.shareBtn} onClick={onShareClick} title=\"Share files with PIN\">\n              üì§ Share\n            </button>\n          </>\n        )}\n        {userTier !== \"anonymous\" && <SaveHistoryButton sessionId={sessionId} />}\n        <button className={styles.accessBtn} onClick={onAccessSharedClick} title=\"Access shared files with PIN\">\n          üîì Access Shared\n        </button>\n        <ThemeToggle />\n        {/* UserMenu handles its own session state, so no props needed here. */}\n        <UserMenu /> \n      </div>\n    </header>\n  )\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,8PAA6C,uBAAuB;;;AARpE;;;;;;;;AAoBO,SAAS,OAAO,EACrB,SAAS,EACT,QAAQ,EACR,SAAS,EACT,iBAAiB,EACjB,SAAS,EACT,YAAY,EACZ,mBAAmB,EACP;;IACZ,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,IAAA,+JAAU,IAAG,qBAAqB;;IAE5D,oEAAoE;IACpE,MAAM,WAAwD,UAAU,SAAS;IAGjF,qBACE,6LAAC;QAAO,WAAW,8IAAM,CAAC,MAAM;;0BAC9B,6LAAC;gBAAI,WAAW,8IAAM,CAAC,IAAI;0BACzB,cAAA,6LAAC;oBAAI,WAAW,8IAAM,CAAC,IAAI;;sCACzB,6LAAC;4BAAI,OAAM;4BAAK,QAAO;4BAAK,SAAQ;4BAAY,MAAK;4BAAO,QAAO;4BAAe,aAAY;;8CAC5F,6LAAC;oCAAK,GAAE;;;;;;8CACR,6LAAC;oCAAK,GAAE;oCAAI,GAAE;oCAAI,OAAM;oCAAK,QAAO;oCAAK,IAAG;;;;;;8CAC5C,6LAAC;oCAAK,GAAE;oCAAuB,eAAc;;;;;;;;;;;;sCAE/C,6LAAC;4BAAG,WAAW,8IAAM,CAAC,KAAK;sCAAE;;;;;;;;;;;;;;;;;0BAGjC,6LAAC;gBAAI,WAAW,8IAAM,CAAC,MAAM;0BAC3B,cAAA,6LAAC,0IAAU;oBAAC,UAAU;oBAAU,WAAW;;;;;;;;;;;0BAE7C,6LAAC;gBAAI,WAAW,8IAAM,CAAC,KAAK;;kCAC1B,6LAAC;wBAAI,WAAW,8IAAM,CAAC,KAAK;;0CAC1B,6LAAC;gCAAK,WAAW,8IAAM,CAAC,KAAK;0CAAE;;;;;;0CAC/B,6LAAC;gCAAK,WAAW,8IAAM,CAAC,KAAK;0CAAG;;;;;;;;;;;;oBAEjC,kBAAkB,MAAM,GAAG,mBAC1B;;0CAEE,6LAAC,8IAAY;gCAAC,mBAAmB;gCAAmB,WAAW;gCAAW,UAAU;;;;;;0CACpF,6LAAC;gCAAO,WAAW,8IAAM,CAAC,QAAQ;gCAAE,SAAS;gCAAc,OAAM;0CAAuB;;;;;;;;oBAK3F,aAAa,6BAAe,6LAAC,wJAAiB;wBAAC,WAAW;;;;;;kCAC3D,6LAAC;wBAAO,WAAW,8IAAM,CAAC,SAAS;wBAAE,SAAS;wBAAqB,OAAM;kCAA+B;;;;;;kCAGxG,6LAAC,4IAAW;;;;;kCAEZ,6LAAC,sIAAQ;;;;;;;;;;;;;;;;;AAIjB;GAtDgB;;QASY,+JAAU;;;KATtB"}},
    {"offset": {"line": 1045, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/FileTree.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"checkbox\": \"FileTree-module__b3B1pW__checkbox\",\n  \"checkboxWrapper\": \"FileTree-module__b3B1pW__checkboxWrapper\",\n  \"children\": \"FileTree-module__b3B1pW__children\",\n  \"container\": \"FileTree-module__b3B1pW__container\",\n  \"expanded\": \"FileTree-module__b3B1pW__expanded\",\n  \"fileLabel\": \"FileTree-module__b3B1pW__fileLabel\",\n  \"folderLabel\": \"FileTree-module__b3B1pW__folderLabel\",\n  \"label\": \"FileTree-module__b3B1pW__label\",\n  \"name\": \"FileTree-module__b3B1pW__name\",\n  \"nodeContent\": \"FileTree-module__b3B1pW__nodeContent\",\n  \"nodeWrapper\": \"FileTree-module__b3B1pW__nodeWrapper\",\n  \"selected\": \"FileTree-module__b3B1pW__selected\",\n  \"toggle\": \"FileTree-module__b3B1pW__toggle\",\n  \"toggleIcon\": \"FileTree-module__b3B1pW__toggleIcon\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 1065, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/abhig/Downloads/zip-explorer1/components/FileTree.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useState, useCallback } from \"react\"\nimport type { FileNode } from \"@/app/actions\"\nimport styles from \"./FileTree.module.css\"\n\ninterface FileTreeProps {\n  tree: FileNode\n  onFileSelect: (path: string) => void\n  selectedFiles: Set<string>\n}\n\nexport function FileTree({ tree, onFileSelect, selectedFiles }: FileTreeProps) {\n  const [expandedFolders, setExpandedFolders] = useState<Set<string>>(new Set([\".\"]))\n\n  const toggleFolder = useCallback((folderPath: string) => {\n    setExpandedFolders((prev) => {\n      const next = new Set(prev)\n      if (next.has(folderPath)) {\n        next.delete(folderPath)\n      } else {\n        next.add(folderPath)\n      }\n      return next\n    })\n  }, [])\n\n  return (\n    <div className={styles.container}>\n      <FileTreeNode\n        node={tree}\n        expandedFolders={expandedFolders}\n        toggleFolder={toggleFolder}\n        onFileSelect={onFileSelect}\n        selectedFiles={selectedFiles}\n        depth={0}\n      />\n    </div>\n  )\n}\n\ninterface FileTreeNodeProps {\n  node: FileNode\n  expandedFolders: Set<string>\n  toggleFolder: (path: string) => void\n  onFileSelect: (path: string) => void\n  selectedFiles: Set<string>\n  depth: number\n}\n\nfunction FileTreeNode({ node, expandedFolders, toggleFolder, onFileSelect, selectedFiles, depth }: FileTreeNodeProps) {\n  const isExpanded = expandedFolders.has(node.path)\n  const isFile = node.type === \"file\"\n  const isSelected = selectedFiles.has(node.path)\n\n  const handleToggle = () => {\n    if (!isFile) {\n      toggleFolder(node.path)\n    }\n  }\n\n  const handleCheckboxChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    e.stopPropagation()\n    if (isFile) {\n      onFileSelect(node.path)\n    }\n  }\n\n  return (\n    <div className={styles.nodeWrapper} style={{ paddingLeft: `${depth * 16}px` }}>\n      <div className={styles.nodeContent}>\n        {!isFile && (\n          <button className={styles.toggle} onClick={handleToggle} aria-label={isExpanded ? \"Collapse\" : \"Expand\"}>\n            <svg\n              className={`${styles.toggleIcon} ${isExpanded ? styles.expanded : \"\"}`}\n              width=\"16\"\n              height=\"16\"\n              viewBox=\"0 0 16 16\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeWidth=\"2\"\n            >\n              <polyline points=\"6 9 12 3 6 9\" />\n            </svg>\n          </button>\n        )}\n        {isFile && (\n          <div className={styles.checkboxWrapper}>\n            <input\n              type=\"checkbox\"\n              className={styles.checkbox}\n              onChange={handleCheckboxChange}\n              checked={isSelected}\n              id={`file-${node.path}`}\n            />\n          </div>\n        )}\n        <label\n          htmlFor={isFile ? `file-${node.path}` : undefined}\n          className={`${styles.label} ${isFile ? styles.fileLabel : styles.folderLabel} ${\n            isSelected ? styles.selected : \"\"\n          }`}\n        >\n          {getFileIcon(node.name)}\n          <span className={styles.name}>{node.name}</span>\n        </label>\n      </div>\n      {!isFile && isExpanded && node.children && (\n        <div className={styles.children}>\n          {node.children.map((child) => (\n            <FileTreeNode\n              key={child.path}\n              node={child}\n              expandedFolders={expandedFolders}\n              toggleFolder={toggleFolder}\n              onFileSelect={onFileSelect}\n              selectedFiles={selectedFiles}\n              depth={depth + 1}\n            />\n          ))}\n        </div>\n      )}\n    </div>\n  )\n}\n\nfunction getFileIcon(filename: string): string {\n  const ext = filename.split(\".\").pop()?.toLowerCase()\n  const iconMap: { [key: string]: string } = {\n    js: \"üìÑ\",\n    ts: \"üìò\",\n    tsx: \"‚öõÔ∏è\",\n    jsx: \"‚öõÔ∏è\",\n    json: \"üî∑\",\n    css: \"üé®\",\n    html: \"üåê\",\n    md: \"üìù\",\n    py: \"üêç\",\n  }\n  return iconMap[ext || \"\"] || \"üìÑ\"\n}\n"],"names":[],"mappings":";;;;;AAGA;AAEA;;;AALA;;;AAaO,SAAS,SAAS,EAAE,IAAI,EAAE,YAAY,EAAE,aAAa,EAAiB;;IAC3E,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAc,IAAI,IAAI;QAAC;KAAI;IAEjF,MAAM,eAAe,IAAA,4KAAW;8CAAC,CAAC;YAChC;sDAAmB,CAAC;oBAClB,MAAM,OAAO,IAAI,IAAI;oBACrB,IAAI,KAAK,GAAG,CAAC,aAAa;wBACxB,KAAK,MAAM,CAAC;oBACd,OAAO;wBACL,KAAK,GAAG,CAAC;oBACX;oBACA,OAAO;gBACT;;QACF;6CAAG,EAAE;IAEL,qBACE,6LAAC;QAAI,WAAW,gJAAM,CAAC,SAAS;kBAC9B,cAAA,6LAAC;YACC,MAAM;YACN,iBAAiB;YACjB,cAAc;YACd,cAAc;YACd,eAAe;YACf,OAAO;;;;;;;;;;;AAIf;GA3BgB;KAAA;AAsChB,SAAS,aAAa,EAAE,IAAI,EAAE,eAAe,EAAE,YAAY,EAAE,YAAY,EAAE,aAAa,EAAE,KAAK,EAAqB;IAClH,MAAM,aAAa,gBAAgB,GAAG,CAAC,KAAK,IAAI;IAChD,MAAM,SAAS,KAAK,IAAI,KAAK;IAC7B,MAAM,aAAa,cAAc,GAAG,CAAC,KAAK,IAAI;IAE9C,MAAM,eAAe;QACnB,IAAI,CAAC,QAAQ;YACX,aAAa,KAAK,IAAI;QACxB;IACF;IAEA,MAAM,uBAAuB,CAAC;QAC5B,EAAE,eAAe;QACjB,IAAI,QAAQ;YACV,aAAa,KAAK,IAAI;QACxB;IACF;IAEA,qBACE,6LAAC;QAAI,WAAW,gJAAM,CAAC,WAAW;QAAE,OAAO;YAAE,aAAa,GAAG,QAAQ,GAAG,EAAE,CAAC;QAAC;;0BAC1E,6LAAC;gBAAI,WAAW,gJAAM,CAAC,WAAW;;oBAC/B,CAAC,wBACA,6LAAC;wBAAO,WAAW,gJAAM,CAAC,MAAM;wBAAE,SAAS;wBAAc,cAAY,aAAa,aAAa;kCAC7F,cAAA,6LAAC;4BACC,WAAW,GAAG,gJAAM,CAAC,UAAU,CAAC,CAAC,EAAE,aAAa,gJAAM,CAAC,QAAQ,GAAG,IAAI;4BACtE,OAAM;4BACN,QAAO;4BACP,SAAQ;4BACR,MAAK;4BACL,QAAO;4BACP,aAAY;sCAEZ,cAAA,6LAAC;gCAAS,QAAO;;;;;;;;;;;;;;;;oBAItB,wBACC,6LAAC;wBAAI,WAAW,gJAAM,CAAC,eAAe;kCACpC,cAAA,6LAAC;4BACC,MAAK;4BACL,WAAW,gJAAM,CAAC,QAAQ;4BAC1B,UAAU;4BACV,SAAS;4BACT,IAAI,CAAC,KAAK,EAAE,KAAK,IAAI,EAAE;;;;;;;;;;;kCAI7B,6LAAC;wBACC,SAAS,SAAS,CAAC,KAAK,EAAE,KAAK,IAAI,EAAE,GAAG;wBACxC,WAAW,GAAG,gJAAM,CAAC,KAAK,CAAC,CAAC,EAAE,SAAS,gJAAM,CAAC,SAAS,GAAG,gJAAM,CAAC,WAAW,CAAC,CAAC,EAC5E,aAAa,gJAAM,CAAC,QAAQ,GAAG,IAC/B;;4BAED,YAAY,KAAK,IAAI;0CACtB,6LAAC;gCAAK,WAAW,gJAAM,CAAC,IAAI;0CAAG,KAAK,IAAI;;;;;;;;;;;;;;;;;;YAG3C,CAAC,UAAU,cAAc,KAAK,QAAQ,kBACrC,6LAAC;gBAAI,WAAW,gJAAM,CAAC,QAAQ;0BAC5B,KAAK,QAAQ,CAAC,GAAG,CAAC,CAAC,sBAClB,6LAAC;wBAEC,MAAM;wBACN,iBAAiB;wBACjB,cAAc;wBACd,cAAc;wBACd,eAAe;wBACf,OAAO,QAAQ;uBANV,MAAM,IAAI;;;;;;;;;;;;;;;;AAa7B;MA1ES;AA4ET,SAAS,YAAY,QAAgB;IACnC,MAAM,MAAM,SAAS,KAAK,CAAC,KAAK,GAAG,IAAI;IACvC,MAAM,UAAqC;QACzC,IAAI;QACJ,IAAI;QACJ,KAAK;QACL,KAAK;QACL,MAAM;QACN,KAAK;QACL,MAAM;QACN,IAAI;QACJ,IAAI;IACN;IACA,OAAO,OAAO,CAAC,OAAO,GAAG,IAAI;AAC/B"}},
    {"offset": {"line": 1266, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/CodeEditor.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"codeBlock\": \"CodeEditor-module__IDUJ-W__codeBlock\",\n  \"codeBlocks\": \"CodeEditor-module__IDUJ-W__codeBlocks\",\n  \"container\": \"CodeEditor-module__IDUJ-W__container\",\n  \"copyButton\": \"CodeEditor-module__IDUJ-W__copyButton\",\n  \"editorContent\": \"CodeEditor-module__IDUJ-W__editorContent\",\n  \"empty\": \"CodeEditor-module__IDUJ-W__empty\",\n  \"fileHeader\": \"CodeEditor-module__IDUJ-W__fileHeader\",\n  \"fileIndex\": \"CodeEditor-module__IDUJ-W__fileIndex\",\n  \"filePath\": \"CodeEditor-module__IDUJ-W__filePath\",\n  \"header\": \"CodeEditor-module__IDUJ-W__header\",\n  \"headerLeft\": \"CodeEditor-module__IDUJ-W__headerLeft\",\n  \"headerRight\": \"CodeEditor-module__IDUJ-W__headerRight\",\n  \"loading\": \"CodeEditor-module__IDUJ-W__loading\",\n  \"saveButton\": \"CodeEditor-module__IDUJ-W__saveButton\",\n  \"spin\": \"CodeEditor-module__IDUJ-W__spin\",\n  \"spinner\": \"CodeEditor-module__IDUJ-W__spinner\",\n  \"title\": \"CodeEditor-module__IDUJ-W__title\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 1289, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/abhig/Downloads/zip-explorer1/components/CodeEditor.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useRef, useState } from \"react\"\nimport { toast } from \"sonner\"\nimport styles from \"./CodeEditor.module.css\"\n\ninterface EditorFile {\n  path: string\n  content: string\n}\n\ninterface CodeEditorProps {\n  files: EditorFile[]\n  isLoading: boolean\n  sessionId: string\n  userTier: \"anonymous\" | \"free\" | \"monthly\" | \"yearly\"\n}\n\nexport function CodeEditor({ files, isLoading, sessionId, userTier }: CodeEditorProps) {\n  const editorRef = useRef<HTMLDivElement>(null)\n  const [prismReady, setPrismReady] = useState(false)\n\n  useEffect(() => {\n    if (typeof window === \"undefined\") return\n    if ((window as any).Prism) {\n      setPrismReady(true)\n      return\n    }\n\n    const cssLink = document.createElement(\"link\")\n    cssLink.rel = \"stylesheet\"\n    cssLink.href = \"https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css\"\n    document.head.appendChild(cssLink)\n\n    const script = document.createElement(\"script\")\n    script.src = \"https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js\"\n    script.onload = () => {\n      const commonLanguages = [\"javascript\", \"typescript\", \"python\", \"bash\", \"json\", \"css\", \"markup\"]\n      let loaded = 0\n\n      commonLanguages.forEach((lang) => {\n        const langScript = document.createElement(\"script\")\n        langScript.src = `https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-${lang}.min.js`\n        langScript.onload = () => {\n          loaded++\n          if (loaded === commonLanguages.length) {\n            setPrismReady(true)\n          }\n        }\n        langScript.onerror = () => {\n          loaded++\n          if (loaded === commonLanguages.length) {\n            setPrismReady(true)\n          }\n        }\n        document.head.appendChild(langScript)\n      })\n    }\n    script.onerror = () => {\n      console.warn(\"Failed to load Prism\")\n      setPrismReady(true)\n    }\n    document.head.appendChild(script)\n  }, [])\n\n  useEffect(() => {\n    if (!prismReady || !editorRef.current || isLoading || files.length === 0) return\n    setTimeout(() => {\n      if ((window as any).Prism && editorRef.current) {\n        try {\n          ;(window as any).Prism.highlightAllUnder(editorRef.current)\n        } catch (e) {\n          console.warn(\"Prism highlighting error:\", e)\n        }\n      }\n    }, 100)\n  }, [files, isLoading, prismReady])\n\n  const copyToClipboard = async () => {\n    const text = files.map((f) => `${f.path}\\n\\n${f.content}`).join(\"\\n\\n\" + \"=\".repeat(80) + \"\\n\\n\")\n    try {\n      await navigator.clipboard.writeText(text)\n      toast.success(\"Copied to clipboard!\")\n    } catch {\n      toast.error(\"Failed to copy to clipboard\")\n    }\n  }\n\n  const handleSave = async () => {\n    if (userTier === \"anonymous\" || userTier === \"free\") {\n      toast.error(\"Upgrade to save ZIP folders\")\n      return\n    }\n\n    const zipName = prompt(\"Enter a name for this ZIP:\")\n    if (!zipName) return\n\n    try {\n      const response = await fetch(\"/api/save-zip\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ zipName, files }),\n      })\n\n      const data = await response.json()\n      if (response.ok) {\n        toast.success(\"ZIP saved successfully!\")\n      } else {\n        toast.error(data.error || \"Failed to save ZIP\")\n      }\n    } catch (error) {\n      toast.error(\"Failed to save ZIP\")\n    }\n  }\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.header}>\n        <div className={styles.headerLeft}>\n          <h2 className={styles.title}>\n            {files.length > 0 ? `${files.length} file(s) selected` : \"No files selected\"}\n          </h2>\n        </div>\n        <div className={styles.headerRight}>\n          {files.length > 0 && (\n            <>\n              <button className={styles.copyButton} onClick={copyToClipboard}>\n                Copy All Code\n              </button>\n              {userTier !== \"anonymous\" && userTier !== \"free\" && (\n                <button className={styles.saveButton} onClick={handleSave}>\n                  üíæ Save\n                </button>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n\n      <div className={styles.editorContent} ref={editorRef}>\n        {isLoading ? (\n          <div className={styles.loading}>\n            <div className={styles.spinner} />\n            <p>Loading file...</p>\n          </div>\n        ) : files.length === 0 ? (\n          <div className={styles.empty}>\n            <p>Select files from the explorer to view their content</p>\n          </div>\n        ) : (\n          <div className={styles.codeBlocks}>\n            {files.map((file, index) => (\n              <div key={file.path} className={styles.codeBlock}>\n                <div className={styles.fileHeader}>\n                  <span className={styles.filePath}>{file.path}</span>\n                  <span className={styles.fileIndex}>{index + 1}</span>\n                </div>\n                <pre>\n                  <code className={getLanguageClass(file.path)}>{file.content}</code>\n                </pre>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\nfunction getLanguageClass(filepath: string): string {\n  const ext = filepath.split(\".\").pop()?.toLowerCase()\n  const languageMap: { [key: string]: string } = {\n    js: \"language-javascript\",\n    ts: \"language-typescript\",\n    tsx: \"language-typescript\",\n    jsx: \"language-javascript\",\n    py: \"language-python\",\n    json: \"language-json\",\n    css: \"language-css\",\n    html: \"language-markup\",\n    md: \"language-markup\",\n  }\n  return languageMap[ext || \"\"] || \"language-text\"\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1612, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/abhig/Downloads/zip-explorer1/components/PricingNotice.tsx"],"sourcesContent":["export function PricingNotice() {\r\n  return (\r\n    <div\r\n      style={{\r\n        background: \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\r\n        color: \"white\",\r\n        padding: \"16px\",\r\n        textAlign: \"center\",\r\n        fontSize: \"14px\",\r\n        borderBottom: \"1px solid rgba(255,255,255,0.1)\",\r\n      }}\r\n    >\r\n      <strong>Anonymous users:</strong> Max 100 files per ZIP, no individual file downloads.\r\n      <a href=\"/login\" style={{ marginLeft: \"8px\", textDecoration: \"underline\" }}>\r\n        Sign in to unlock more features\r\n      </a>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAO,SAAS;IACd,qBACE,6LAAC;QACC,OAAO;YACL,YAAY;YACZ,OAAO;YACP,SAAS;YACT,WAAW;YACX,UAAU;YACV,cAAc;QAChB;;0BAEA,6LAAC;0BAAO;;;;;;YAAyB;0BACjC,6LAAC;gBAAE,MAAK;gBAAS,OAAO;oBAAE,YAAY;oBAAO,gBAAgB;gBAAY;0BAAG;;;;;;;;;;;;AAKlF;KAlBgB"}},
    {"offset": {"line": 1665, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/AccessSharedFiles.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"accessBtn\": \"AccessSharedFiles-module__bqgaga__accessBtn\",\n  \"closeBtn\": \"AccessSharedFiles-module__bqgaga__closeBtn\",\n  \"downloadBtn\": \"AccessSharedFiles-module__bqgaga__downloadBtn\",\n  \"fileItem\": \"AccessSharedFiles-module__bqgaga__fileItem\",\n  \"fileList\": \"AccessSharedFiles-module__bqgaga__fileList\",\n  \"filesDisplay\": \"AccessSharedFiles-module__bqgaga__filesDisplay\",\n  \"input\": \"AccessSharedFiles-module__bqgaga__input\",\n  \"label\": \"AccessSharedFiles-module__bqgaga__label\",\n  \"modal\": \"AccessSharedFiles-module__bqgaga__modal\",\n  \"modalBody\": \"AccessSharedFiles-module__bqgaga__modalBody\",\n  \"modalContent\": \"AccessSharedFiles-module__bqgaga__modalContent\",\n  \"modalHeader\": \"AccessSharedFiles-module__bqgaga__modalHeader\",\n  \"newAccessBtn\": \"AccessSharedFiles-module__bqgaga__newAccessBtn\",\n  \"pinInput\": \"AccessSharedFiles-module__bqgaga__pinInput\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 1685, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/abhig/Downloads/zip-explorer1/components/AccessSharedFiles.tsx"],"sourcesContent":["// C:\\Users\\abhig\\Downloads\\zip-explorer1\\components\\AccessSharedFiles.tsx\r\n\r\n\"use client\"\r\n\r\nimport { useState } from \"react\"\r\nimport { toast } from \"sonner\"\r\n// Assuming this is the correct path to your style module\r\nimport styles from \"@/components/AccessSharedFiles.module.css\" \r\n\r\ninterface SharedFile {\r\n    path: string // This MUST be present and unique (e.g., \"src/index.js\")\r\n    content: string // Note: content is not used here but kept for interface consistency\r\n    name: string // This is the displayed filename (e.g., \"index.js\")\r\n}\r\n\r\ninterface AccessSharedFilesProps {\r\n    isOpen: boolean\r\n    onClose: () => void\r\n}\r\n\r\nexport function AccessSharedFiles({ isOpen, onClose }: AccessSharedFilesProps) {\r\n    const [pin, setPin] = useState(\"\")\r\n    const [files, setFiles] = useState<SharedFile[]>([])\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const [isDownloading, setIsDownloading] = useState(false)\r\n    const [accessed, setAccessed] = useState(false)\r\n\r\n    const handleAccessFiles = async () => {\r\n        if (!pin || !/^\\d{4}$/.test(pin)) {\r\n            toast.error(\"Invalid PIN format (4 digits)\")\r\n            return\r\n        }\r\n\r\n        setIsLoading(true)\r\n        try {\r\n            // 1. Fetch files associated with the PIN via the API route\r\n            const response = await fetch(\"/api/share/access\", {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({ pin }),\r\n            })\r\n\r\n            const data = await response.json()\r\n            if (!response.ok) {\r\n                // Handle specific expiration status (410) if the backend returns it\r\n                if (response.status === 410) {\r\n                    toast.error(\"The share PIN has expired.\")\r\n                } else {\r\n                    toast.error(data.error || \"Failed to access files\")\r\n                }\r\n                setFiles([]); // Ensure files state is reset on failure\r\n                return\r\n            }\r\n\r\n            // FIX: Ensure file objects have a valid path before setting state.\r\n            // The API route should provide { path: string, name: string }\r\n            const validFiles = data.files.filter((f: SharedFile) => f && f.path && f.name)\r\n            \r\n            setFiles(validFiles)\r\n            setAccessed(true)\r\n            \r\n            if (validFiles.length === 0) {\r\n                 // Warning if the share exists but contains no valid files\r\n                 toast.warning(\"Share accessed, but no files are available.\")\r\n            } else {\r\n                 toast.success(`Files accessed! Found ${validFiles.length} file(s).`)\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error(\"Access Shared Files Error:\", error);\r\n            toast.error(\"Failed to access files due to an error.\")\r\n        } finally {\r\n            setIsLoading(false)\r\n        }\r\n    }\r\n\r\n    const handleDownloadShared = async () => {\r\n        if (!pin) {\r\n            toast.error(\"PIN is required for download.\")\r\n            return;\r\n        }\r\n        \r\n        const validFilePaths = files.map(f => f.path).filter(p => p && typeof p === 'string');\r\n\r\n        if (validFilePaths.length === 0) {\r\n            toast.error(\"No valid files to download.\")\r\n            return;\r\n        }\r\n\r\n        setIsDownloading(true);\r\n\r\n        try {\r\n            // 2. Call the dedicated API endpoint for PIN-based download\r\n            const response = await fetch(\"/api/share/download\", {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                // Pass the PIN and the list of paths to be zipped\r\n                body: JSON.stringify({ pin, files: validFilePaths }),\r\n            });\r\n\r\n            if (!response.ok) {\r\n                // The error response needs to be parsed if available\r\n                let errorData = { error: \"Download failed due to server error.\" };\r\n                try {\r\n                    errorData = await response.json();\r\n                } catch (e) {\r\n                    // response was not JSON, use generic message\r\n                }\r\n                toast.error(errorData.error || \"Download failed\")\r\n                return\r\n            }\r\n\r\n            // 3. Initiate client-side download from the blob response\r\n            const blob = await response.blob()\r\n            const url = window.URL.createObjectURL(blob)\r\n            const a = document.createElement(\"a\")\r\n            \r\n            a.href = url\r\n            a.download = \"shared_files.zip\" \r\n            \r\n            a.click()\r\n            window.URL.revokeObjectURL(url)\r\n            \r\n            toast.success(\"Download started!\")\r\n\r\n        } catch (error) {\r\n            console.error(\"Download shared files failed:\", error)\r\n            toast.error(\"Download failed due to client error.\")\r\n        } finally {\r\n            setIsDownloading(false);\r\n        }\r\n    }\r\n\r\n    if (!isOpen) return null\r\n\r\n    const fileCount = files.length;\r\n    // Updated text to reflect \"FILES AVAILABLE\" structure\r\n    const fileCountText = fileCount === 1 ? \"FILE AVAILABLE\" : \"FILES AVAILABLE\"; \r\n\r\n    return (\r\n        <div className={styles.modal} onClick={onClose}>\r\n            <div className={styles.modalContent} onClick={(e) => e.stopPropagation()}>\r\n                <div className={styles.modalHeader}>\r\n                    <h2>Access Shared Files</h2>\r\n                    <button onClick={onClose} className={styles.closeBtn}>\r\n                        √ó\r\n                    </button>\r\n                </div>\r\n\r\n                <div className={styles.modalBody}>\r\n                    {!accessed ? (\r\n                        <div className={styles.pinInput}>\r\n                            <label className={styles.label}>Enter Share PIN:</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                maxLength={4}\r\n                                placeholder=\"0000\"\r\n                                value={pin}\r\n                                // Only allow digits and limit length to 4\r\n                                onChange={(e) => setPin(e.target.value.replace(/\\D/g, \"\").slice(0, 4))}\r\n                                className={styles.input}\r\n                            />\r\n                            <button className={styles.accessBtn} onClick={handleAccessFiles} disabled={isLoading || pin.length !== 4}>\r\n                                {isLoading ? \"Accessing...\" : \"Access Files\"}\r\n                            </button>\r\n                        </div>\r\n                    ) : (\r\n                        <div className={styles.filesDisplay}>\r\n                            <p className={styles.label}>{fileCount} {fileCountText}</p>\r\n                            \r\n                            <div className={styles.fileList}>\r\n                                {fileCount > 0 ? (\r\n                                    files.map((file, index) => (\r\n                                        <div key={file.path || index} className={styles.fileItem}>\r\n                                            <span>{file.name}</span>\r\n                                        </div>\r\n                                    ))\r\n                                ) : (\r\n                                    <div className={styles.noFiles}>No files available in this share.</div>\r\n                                )}\r\n                            </div>\r\n                            \r\n                            <button \r\n                                className={styles.downloadBtn} \r\n                                onClick={handleDownloadShared} \r\n                                disabled={isDownloading || fileCount === 0}\r\n                            >\r\n                                {isDownloading ? \"‚¨áÔ∏è Preparing Download...\" : \"‚¨áÔ∏è Download All Files\"}\r\n                            </button>\r\n                            <button\r\n                                className={styles.newAccessBtn}\r\n                                onClick={() => {\r\n                                    setPin(\"\")\r\n                                    setFiles([])\r\n                                    setAccessed(false)\r\n                                }}\r\n                            >\r\n                                Access Another PIN\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1983, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/app/page.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"container\": \"page-module__E0kJGG__container\",\n  \"editor\": \"page-module__E0kJGG__editor\",\n  \"empty\": \"page-module__E0kJGG__empty\",\n  \"errorBanner\": \"page-module__E0kJGG__errorBanner\",\n  \"errorClose\": \"page-module__E0kJGG__errorClose\",\n  \"errorIcon\": \"page-module__E0kJGG__errorIcon\",\n  \"errorMessage\": \"page-module__E0kJGG__errorMessage\",\n  \"mainContent\": \"page-module__E0kJGG__mainContent\",\n  \"sidebar\": \"page-module__E0kJGG__sidebar\",\n  \"slideIn\": \"page-module__E0kJGG__slideIn\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}}]
}